--- a/codemp/ui/ui_public.h
+++ b/codemp/ui/ui_public.h
@@ -1,9 +1,9 @@
-// Copyright (C) 1999-2000 Id Software, Inc.
+// Copyright (C) 2001-2002 Raven Software
 //
 #ifndef __UI_PUBLIC_H__
 #define __UI_PUBLIC_H__
 
-#define UI_API_VERSION	7
+#define UI_API_VERSION	6
 
 typedef struct {
 	connstate_t		connState;
@@ -14,78 +14,87 @@ typedef struct {
 	char			messageString[MAX_STRING_CHARS];
 } uiClientState_t;
 
-typedef enum {
-	UI_ERROR,
+typedef enum 
+{
+	UI_ERROR,							
 	UI_PRINT,
 	UI_MILLISECONDS,
 	UI_CVAR_SET,
-	UI_CVAR_VARIABLEVALUE,
-	UI_CVAR_VARIABLESTRINGBUFFER,
+	UI_CVAR_VARIABLEVALUE,			
+
+	UI_CVAR_VARIABLESTRINGBUFFER,	
 	UI_CVAR_SETVALUE,
 	UI_CVAR_RESET,
 	UI_CVAR_CREATE,
 	UI_CVAR_INFOSTRINGBUFFER,
-	UI_ARGC,
+
+	UI_ARGC,							
 	UI_ARGV,
 	UI_CMD_EXECUTETEXT,
 	UI_FS_FOPENFILE,
 	UI_FS_READ,
-	UI_FS_WRITE,
+
+	UI_FS_WRITE,						
 	UI_FS_FCLOSEFILE,
 	UI_FS_GETFILELIST,
 	UI_R_REGISTERMODEL,
 	UI_R_REGISTERSKIN,
-	UI_R_REGISTERSHADERNOMIP,
-	UI_R_SHADERNAMEFROMINDEX,
+
+	UI_R_REGISTERSHADERNOMIP,			
 	UI_R_CLEARSCENE,
 	UI_R_ADDREFENTITYTOSCENE,
 	UI_R_ADDPOLYTOSCENE,
 	UI_R_ADDLIGHTTOSCENE,
-	UI_R_RENDERSCENE,
+
+	UI_R_RENDERSCENE,					
 	UI_R_SETCOLOR,
 	UI_R_DRAWSTRETCHPIC,
 	UI_UPDATESCREEN,
 	UI_CM_LERPTAG,
-	UI_CM_LOADMODEL,
+
+	UI_CM_LOADMODEL,					
 	UI_S_REGISTERSOUND,
 	UI_S_STARTLOCALSOUND,
 	UI_KEY_KEYNUMTOSTRINGBUF,
 	UI_KEY_GETBINDINGBUF,
-	UI_KEY_SETBINDING,
+
+	UI_KEY_SETBINDING,					
 	UI_KEY_ISDOWN,
 	UI_KEY_GETOVERSTRIKEMODE,
 	UI_KEY_SETOVERSTRIKEMODE,
 	UI_KEY_CLEARSTATES,
-	UI_KEY_GETCATCHER,
+
+	UI_KEY_GETCATCHER,					
 	UI_KEY_SETCATCHER,
 	UI_GETCLIPBOARDDATA,
 	UI_GETGLCONFIG,
 	UI_GETCLIENTSTATE,
-	UI_GETCONFIGSTRING,
+
+	UI_GETCONFIGSTRING,					
 	UI_LAN_GETPINGQUEUECOUNT,
 	UI_LAN_CLEARPING,
 	UI_LAN_GETPING,
 	UI_LAN_GETPINGINFO,
-	UI_CVAR_REGISTER,
+
+	UI_CVAR_REGISTER,					
 	UI_CVAR_UPDATE,
 	UI_MEMORY_REMAINING,
 	UI_GET_CDKEY,
 	UI_SET_CDKEY,
-	UI_VERIFY_CDKEY,
-	UI_R_REGISTERFONT,
-	UI_R_FONT_STRLENPIXELS,
-	UI_R_FONT_STRLENCHARS,
-	UI_R_FONT_STRHEIGHTPIXELS,
-	UI_R_FONT_DRAWSTRING,
-	UI_LANGUAGE_ISASIAN,
-	UI_LANGUAGE_USESSPACES,
-	UI_ANYLANGUAGE_READCHARFROMSTRING,
-	UI_R_MODELBOUNDS,
+
+	UI_R_REGISTERFONT,					
+	UI_R_GETTEXTWIDTH,
+	UI_R_GETTEXTHEIGHT,
+	UI_R_DRAWTEXT,
+	UI_R_DRAWTEXTWITHCURSOR,
+
+	UI_R_MODELBOUNDS,					
 	UI_PC_ADD_GLOBAL_DEFINE,
 	UI_PC_LOAD_SOURCE,
 	UI_PC_FREE_SOURCE,
 	UI_PC_READ_TOKEN,
-	UI_PC_SOURCE_FILE_AND_LINE,
+
+	UI_PC_SOURCE_FILE_AND_LINE,			
 	UI_PC_LOAD_GLOBAL_DEFINES,
 	UI_PC_REMOVE_ALL_GLOBAL_DEFINES,
 
@@ -93,37 +102,42 @@ typedef enum {
 	UI_S_STARTBACKGROUNDTRACK,
 	UI_REAL_TIME,
 	UI_LAN_GETSERVERCOUNT,
-	UI_LAN_GETSERVERADDRESSSTRING,
+
+	UI_LAN_GETSERVERADDRESSSTRING,		
 	UI_LAN_GETSERVERINFO,
 	UI_LAN_MARKSERVERVISIBLE,
 	UI_LAN_UPDATEVISIBLEPINGS,
 	UI_LAN_RESETPINGS,
-	UI_LAN_LOADCACHEDSERVERS,
+
+	UI_LAN_LOADCACHEDSERVERS,			
 	UI_LAN_SAVECACHEDSERVERS,
 	UI_LAN_ADDSERVER,
 	UI_LAN_REMOVESERVER,
 	UI_CIN_PLAYCINEMATIC,
-	UI_CIN_STOPCINEMATIC,
+
+	UI_CIN_STOPCINEMATIC,				
 	UI_CIN_RUNCINEMATIC,
 	UI_CIN_DRAWCINEMATIC,
 	UI_CIN_SETEXTENTS,
 	UI_R_REMAP_SHADER,
+
+	UI_VERIFY_CDKEY,					
 	UI_LAN_SERVERSTATUS,
 	UI_LAN_GETSERVERPING,
 	UI_LAN_SERVERISVISIBLE,
 	UI_LAN_COMPARESERVERS,
 
-	UI_MEMSET = 100,
+	UI_MEMSET = 100,					
 	UI_MEMCPY,
 	UI_STRNCPY,
 	UI_SIN,
 	UI_COS,
-	UI_ATAN2,
+
+	UI_ATAN2,							
 	UI_SQRT,
-	UI_MATRIXMULTIPLY,
+	UI_FLOOR,
 	UI_ANGLEVECTORS,
 	UI_PERPENDICULARVECTOR,
-	UI_FLOOR,
 	UI_CEIL,
 
 	UI_TESTPRINTINT,
@@ -131,89 +145,121 @@ typedef enum {
 
 	UI_ACOS,
 	UI_ASIN,
+	UI_MATRIXMULTIPLY,
 
-	UI_SP_GETNUMLANGUAGES,
-	UI_SP_GETLANGUAGENAME,
-	UI_SP_GETSTRINGTEXTSTRING = 200,
-
-/*
-Ghoul2 Insert Start
-*/
-	UI_G2_LISTSURFACES,
 	UI_G2_LISTBONES,
-	UI_G2_SETMODELS,
+	UI_G2_LISTSURFACES,
+	UI_G2_ADDBOLT,
+	UI_G2_REMOVEBOLT,
+
+	UI_G2_ATTACHG2MODEL,				
 	UI_G2_HAVEWEGHOULMODELS,
+	UI_G2_SETMODELS,
 	UI_G2_GETBOLT,
-	UI_G2_GETBOLT_NOREC,
-	UI_G2_GETBOLT_NOREC_NOROT,
 	UI_G2_INITGHOUL2MODEL,
-	UI_G2_COLLISIONDETECT,
-	UI_G2_COLLISIONDETECTCACHE,
-	UI_G2_CLEANMODELS,
+
+	UI_G2_CLEANMODELS,					
 	UI_G2_ANGLEOVERRIDE,
 	UI_G2_PLAYANIM,
-	UI_G2_GETBONEANIM,
-	UI_G2_GETBONEFRAME, //trimmed down version of GBA, so I don't have to pass all those unused args across the VM-exe border
 	UI_G2_GETGLANAME,
 	UI_G2_COPYGHOUL2INSTANCE,
-	UI_G2_COPYSPECIFICGHOUL2MODEL,
+
+	UI_G2_COPYSPECIFICGHOUL2MODEL,		
 	UI_G2_DUPLICATEGHOUL2INSTANCE,
-	UI_G2_HASGHOUL2MODELONINDEX,
 	UI_G2_REMOVEGHOUL2MODEL,
-	UI_G2_ADDBOLT,
-	UI_G2_SETBOLTON,
-	UI_G2_SETROOTSURFACE,
+
+	// CGenericParser2 (void *) routines
+	UI_GP_PARSE,						
+	UI_GP_PARSE_FILE,
+	UI_GP_CLEAN,
+	UI_GP_DELETE,
+	UI_GP_GET_BASE_PARSE_GROUP,
+
 	UI_G2_SETSURFACEONOFF,
-	UI_G2_SETNEWORIGIN,
-
-	UI_G2_GETTIME,
-	UI_G2_SETTIME,
-
-/*
-	//rww - RAGDOLL_BEGIN
-*/
-	UI_G2_SETRAGDOLL,
-	UI_G2_ANIMATEG2MODELS,
-/*
-	//rww - RAGDOLL_END
-*/
-
-	//rww - ik move method, allows you to specify a bone and move it to a world point (within joint constraints)
-	//by using the majority of gil's existing bone angling stuff from the ragdoll code.
-	UI_G2_SETBONEIKSTATE,
-	UI_G2_IKMOVE,
-
-	UI_G2_GETSURFACENAME,
+	UI_G2_REGISTERSKIN,
 	UI_G2_SETSKIN,
-	UI_G2_ATTACHG2MODEL,
-/*
-Ghoul2 Insert End
-*/
+	UI_G2_GETANIMFILENAMEINDEX,
+
+	// CGPGroup (void *) routines
+	UI_GPG_GET_NAME,					
+	UI_GPG_GET_NEXT,
+	UI_GPG_GET_INORDER_NEXT,
+	UI_GPG_GET_INORDER_PREVIOUS,
+	UI_GPG_GET_PAIRS,
+
+	UI_GPG_GET_INORDER_PAIRS,			
+	UI_GPG_GET_SUBGROUPS,
+	UI_GPG_GET_INORDER_SUBGROUPS,
+	UI_GPG_FIND_SUBGROUP,
+	UI_GPG_FIND_PAIR,
+
+	UI_GPG_FIND_PAIRVALUE,				
+
+	// CGPValue (void *) routines
+	UI_GPV_GET_NAME,
+	UI_GPV_GET_NEXT,
+	UI_GPV_GET_INORDER_NEXT,
+	UI_GPV_GET_INORDER_PREVIOUS,
+
+	UI_GPV_IS_LIST,						
+	UI_GPV_GET_TOP_VALUE,
+	UI_GPV_GET_LIST,
+	
+	UI_CL_READ_G2SKIN,					
+	UI_CL_READ_NPCFILES,
+	UI_CL_FREE_NPCFILES,
+	UI_CL_GET_MODEL_LIST,
+
+	UI_PARENTAL_UPDATE,					
+	UI_PARENTAL_SET_PASSWORD,
+	UI_PARENTAL_GET_PASSWORD,
+
+	UI_VM_LOCALALLOC,
+	UI_VM_LOCALALLOCUNALIGNED,
+	UI_VM_LOCALTEMPALLOC,
+	UI_VM_LOCALTEMPFREE,
+	UI_VM_LOCALSTRINGALLOC,
+
+	UI_NET_AVAILABLE,
+
+	UI_VERSION_GET_DESCRIPTION,
+	UI_VERSION_GET_NUM_SITES,
+	UI_VERSION_GET_SITE,
+	UI_VERSION_DOWNLOAD,
+
+	UI_PB_ENABLE,
+	UI_PB_DISABLE,
+	UI_PB_ISENABLED,
+
+	UI_GET_TEAM_COUNT,
+	UI_GET_TEAM_SCORE,
+
 } uiImport_t;
 
-typedef enum {
+typedef enum 
+{
 	UIMENU_NONE,
 	UIMENU_MAIN,
 	UIMENU_INGAME,
-	UIMENU_PLAYERCONFIG,
+	UIMENU_BAD_CD_KEY,
 	UIMENU_TEAM,
-	UIMENU_POSTGAME,
-	UIMENU_PLAYERFORCE,
-	UIMENU_SIEGEMESSAGE,
-	UIMENU_SIEGEOBJECTIVES,
-	UIMENU_VOICECHAT,
-	UIMENU_CLOSEALL,
-	UIMENU_CLASSSEL
-};
-typedef int uiMenuCommand_t;
-
-#define SORT_HOST			0
-#define SORT_MAP			1
-#define SORT_CLIENTS		2
-#define SORT_GAME			3
-#define SORT_PING			4
-
-typedef enum {
+	UIMENU_OBJECTIVES,
+	UIMENU_OUTFITTING,
+	UIMENU_RADIO,
+	UIMENU_VERSION,
+
+} uiMenuCommand_t;
+
+#define	SORT_NEEDPASS		0
+#define SORT_HOST			1
+#define SORT_MAP			2
+#define SORT_CLIENTS		3
+#define SORT_GAME			4
+#define SORT_PING			5
+#define SORT_PUNKBUSTER		6
+
+typedef enum 
+{
 	UI_GETAPIVERSION = 0,	// system reserved
 
 	UI_INIT,
@@ -243,11 +289,16 @@ typedef enum {
 	UI_DRAW_CONNECT_SCREEN,
 //	void	UI_DrawConnectScreen( qboolean overlay );
 	UI_HASUNIQUECDKEY,
+
+	UI_CLOSEALL,
+//	void	Menus_CloseAll ( void );
+
 // if !overlay, the background will be drawn, otherwise it will be
 // overlayed over whatever the cgame has drawn.
 // a GetClientState syscall will be made to get the current strings
 
-	UI_MENU_RESET
+	UI_DRAW_LOADING_SCREEN,
+
 } uiExport_t;
 
 #endif
diff --git a/codemp/win32/engine.rc b/codemp/win32/engine.rc
index a513c40..e9a04e1 100644
